<!DOCTYPE html>
<html lang="en">

<script>
fetch('../../php-handlers/checkSession.php')
  .then(res => res.json())
  .then(data => {
    if(!data.loggedIn){
      window.location.href = 'login.html';
    }
  });
</script>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Request a Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    </head>

<body>
    <div class="container py-5">
        <h2 class="mb-4 text-center"> Request a Barangay Document</h2>

        <form id="documentRequestForm" method="POST" enctype="multipart/form-data" class="card p-4 shadow-sm">
            <div class="mb-3">
                <label for="documentType" class="form-label">Select Document</label>
                <select class="form-select" name="documentType" id="documentType" required>
                    <option value="" disabled selected>Choose a document type</option>
                </select>
            </div>

            <div id="customFieldsSection" class="border p-3 mb-4 rounded" style="display: none;">
                <div class="mb-3">
                    <p class="text-danger small">
                        <i class="bi bi-info-circle-fill me-1"></i> The fields below will be directly inserted into your document. Please ensure accuracy to prevent rejections.
                    </p>
                    <div id="customFieldsContainer"></div>
                </div>
            </div>
            <div class="mb-3">
                <label for="purposeSelect" class="form-label">Requested for: </label>
                <select class="form-select" id="purposeSelect" required>
                    <option value="" disabled selected>Choose purpose...</option>
                    <option value="Request for self">Requesting for myself</option>
                    <option value="Family Member Assistance">Requesting for a family member</option>
                    <option value="Neighbor Assistance">Helping my neighbor to request theirs</option>
                    <option value="Other">Other (please specify below)</option>
                </select>
            </div>

            <div class="mb-3" id="otherPurposeContainer" style="display: none;">
                <label for="otherPurposeText" class="form-label">Please Specify Purpose *</label>
                <textarea class="form-control" id="otherPurposeText" rows="3"></textarea>
            </div>

            <div class="mb-3">
                <label for="supportingDocs" class="form-label">Upload Supporting Documents</label>
                <input type="file" required class="form-control" name="supportingDocs[]" id="supportingDocs" multiple />
            </div>
            

            <div class="text-center">
                <button type="submit" class="btn btn-primary px-5">Submit Request</button>
            </div>
        </form>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="../../js/res-request-document.js"></script>
    
</body>

</html>