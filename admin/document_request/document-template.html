<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Template </title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <link rel="stylesheet" href="../../css/document-template-style.css">
    <link rel="stylesheet" href="../../css/sidebar-style.css">
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <!-- Sidebar Wrapper -->
    <div class="sidebar-wrapper" id="sidebarWrapper">
        <div class="sidebar bg-dark">
            <button class="close-sidebar d-lg-none" id="closeSidebar" aria-label="Close sidebar" title="Close sidebar">
                <i class="bi bi-x-lg"></i>
            </button>

            <div class="logo pt-4 pb-1 mb-auto text-center">
                <a href="#" class="text-white text-decoration-none" title="Barangay Ligaya Management System">
                    <span class="fs-4 d-block mt-2">BLMS</span>
                </a>
            </div>
            <hr class="text-white">

            <ul class="nav flex-column mb-auto">
                <!-- Dashboard -->
                <li class="nav-item">
                    <a href="../dashboard.html" class="nav-link ">
                        <i class="bi bi-grid"></i>
                        <span>Dashboard</span>
                    </a>
                </li>

                <!-- Account -->
                <li class="nav-item">
                    <a href="../account.html" class="nav-link">
                        <i class="bi bi-person-vcard-fill"></i>
                        <span>Account</span>
                    </a>
                </li>

                <!-- Manage Residents -->
                <li class="nav-item">
                    <a href="../manage_residents/resident-info.html" class="nav-link">
                        <i class="bi bi-people"></i>
                        <span>Manage Residents</span>
                    </a>
                </li>

                <!-- Document Issuance -->
                <li class="nav-item">
                    <a href="#" class="nav-link active dropdown-toggle" data-bs-toggle="collapse"
                        data-bs-target="#servicesDropdown">
                        <i class="bi bi-file-earmark-text"></i>
                        <span>Document Issuance</span>
                    </a>
                    <ul class="collapse list-unstyled" id="servicesDropdown">
                        <li><a href="document-request-list.html" class="nav-link">Document
                                Request</a>
                        </li>
                        <li><a href="document-template.html" class="nav-link active-item">Document Template</a>
                        </li>
                    </ul>
                </li>

                <!-- Announcement -->
                <li class="nav-item">
                    <a href="../announcement_admin.html" class="nav-link">
                        <i class="bi bi-megaphone"></i>
                        <span>Announcement</span>
                    </a>
                </li>

                <!-- Manage Leaderboards -->
                <li class="nav-item">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse"
                        data-bs-target="#manageLB_Dropdown">
                        <i class="bi bi-trophy"></i>
                        <span>Manage Leaderboards</span>
                    </a>
                    <ul class="collapse list-unstyled" id="manageLB_Dropdown">
                        <li><a href="../manage_leaderboards/view-leaderboard.html" class="nav-link">View Leaderboard</a>
                        </li>
                        <li><a href="../manage_leaderboards/achievement&badges.html" class="nav-link">Achievements &
                                Badges</a></li>
                    </ul>
                </li>

                <!-- Credit Points Conversion -->
                <li class="nav-item">
                    <a href="../credit_and_redeemable_point_system/conversion-settings.html" class="nav-link">
                        <i class="bi bi-wallet"></i>
                        <span>Credit Points Conversion</span>
                    </a>
                </li>

                <!-- Reward Management -->
                <li class="nav-item">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse"
                        data-bs-target="#reward_Dropdown">
                        <i class="bi bi-gift"></i>
                        <span>Manage Rewards</span>
                    </a>
                    <ul class="collapse list-unstyled" id="reward_Dropdown">
                        <li><a href="../reward_management/redemption-request.html" class="nav-link">Redemption
                                Request</a>
                        </li>
                        <li><a href="../reward_management/rewards-incentives.html" class="nav-link">Incentives</a></li>
                    </ul>
                </li>

                <!-- Volunteer Drive -->
                <li class="nav-item">
                    <a href="../volunteer_drive/attendance-evaluation.html" class="nav-link">
                        <i class="bi bi-balloon-heart"></i>
                        <span>Volunteer Drive</span>
                    </a>
                </li>

                <!-- Brgy Projects -->
                <li class="nav-item">
                    <a href="../brgy_project/projects.html" class="nav-link">
                        <i class="bi bi-building"></i>
                        <span>Brgy Project</span>
                    </a>
                </li>

                <!-- Manage Complaints -->
                <li class="nav-item">
                    <a href="../complaints.html" class="nav-link ">
                        <i class="bi bi-exclamation-triangle"></i>
                        <span>Manage Complaints</span>
                    </a>
                </li>
            </ul>

            <!-- Settings -->
            <hr class="text-white">
            <div class="mb-auto">
                <a href="#" class="nav-link">
                    <i class="bi bi-gear"></i>
                    <span>Settings</span>
                </a>
            </div>

            <!-- Sign out -->
            <hr class="text-white">
            <div class="mb-auto">
                <a href="#" class="nav-link" id="logoutBtn">
                    <i class="bi bi-box-arrow-left"></i>
                    <span>Sign out</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content ">
        <!-- Mobile Header -->
        <div class="mobile-header bg-dark d-lg-none">
            <button class="hamburger-menu" id="hamburgerMenu" aria-label="Open sidebar menu" title="Open sidebar menu">
                <i class="bi bi-list"></i>
            </button>
            <h5 class="mb-0 flex-grow-1">Document Issuance</h5>
            <!-- Notification Dropdown -->
            <div class="dropdown">
                <button class="btn btn-dark position-relative dropdown-toggle" type="button" id="notificationDropdown"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-bell fs-5"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                        3
                        <span class="visually-hidden">unread messages</span>
                    </span>
                </button>
                <ul class="dropdown-menu dropdown-menu-end p-2 shadow" style="width: 300px;">
                    <li class="fw-bold px-2 pb-1">Notifications</li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li class="mb-2">
                        <a class="dropdown-item small notif-item" href="#">
                            üìÑ Your Barangay Clearance is now ready for pickup.
                            <div class="text-muted small">2 hrs ago</div>
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="dropdown-item small notif-item" href="#">
                            üéñÔ∏è You earned 10 points from a clean-up drive!
                            <div class="text-muted small">Yesterday</div>
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="dropdown-item small notif-item" href="#">
                            üõ†Ô∏è Complaint #00213 has been marked as resolved.
                            <div class="text-muted small">3 days ago</div>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item text-center text-primary" href="notification.html">See all</a></li>
                </ul>
            </div>
        </div>

        <!-- Desktop Header -->
        <div class="content-header d-none d-lg-block">
            <div class="d-flex justify-content-between align-items-center bg-dark text-white p-3">
                <h4 class="mb-0">Document Issuance</h4>
                <!-- Notification Dropdown for Desktop -->
                <div class="dropdown">
                    <button class="btn btn-dark position-relative dropdown-toggle" type="button"
                        id="notificationDropdownDesktop" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-bell fs-5"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            3
                            <span class="visually-hidden">unread messages</span>
                        </span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end p-2 shadow" style="width: 300px;">
                        <li class="fw-bold px-2 pb-1">Notifications</li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li class="mb-2">
                            <a class="dropdown-item small notif-item" href="#">
                                üìÑ Your Barangay Clearance is now ready for pickup.
                                <div class="text-muted small">2 hrs ago</div>
                            </a>
                        </li>
                        <li class="mb-2">
                            <a class="dropdown-item small notif-item" href="#">
                                üéñÔ∏è You earned 10 points from a clean-up drive!
                                <div class="text-muted small">Yesterday</div>
                            </a>
                        </li>
                        <li class="mb-2">
                            <a class="dropdown-item small notif-item" href="#">
                                üõ†Ô∏è Complaint #00213 has been marked as resolved.
                                <div class="text-muted small">3 days ago</div>
                            </a>
                        </li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item text-center text-primary" href="notification.html">See all</a></li>
                    </ul>
                </div>
                <!-- Sign Out Confirmation Modal -->
                <div class="modal fade" id="signoutModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="signoutModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header bg-warning text-dark">
                                <h5 class="modal-title" id="signoutModalLabel">
                                    <i class="bi bi-exclamation-triangle me-2"></i>
                                    Confirm Sign Out
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="text-center mb-3">
                                    <i class="bi bi-box-arrow-left text-warning" style="font-size: 3rem;"></i>
                                </div>
                                <div class="alert alert-warning d-flex align-items-center" role="alert">
                                    <i class="bi bi-info-circle-fill me-2"></i>
                                    <div>
                                        <strong>Are you sure you want to sign out?</strong>
                                    </div>
                                </div>
                                <p class="text-center mb-0">You will be logged out of the Barangay Ligaya Management System and redirected to the login page.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                    <i class="bi bi-x-circle me-1"></i>
                                    Cancel
                                </button>
                                <button type="button" class="btn btn-warning" id="confirmSignoutBtn">
                                    <i class="bi bi-box-arrow-left me-1"></i>
                                    Sign Out
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- content -->
        <div class="container mx-2">
            <div
                class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h3 class=" ">Document Template Management</h3>
                <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group me-2">
                        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addDocumentModal">
                            <i class="bi bi-plus-circle"></i> Add New Document
                        </button>
                    </div>
                </div>
            </div>

                            <!-- Filters Row -->
                            <div class="d-flex flex-column flex-md-row gap-2 mb-4 filters-row">
                                <!-- Search Bar -->
                                <div class="flex-grow-1 search-bar">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                                        <input type="text" class="form-control" id="templateSearch"
                                            placeholder="Search document type">
                                    </div>
                                </div>
                            </div>


            <div class="">
                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="documentTypesTable">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col">Document Type</th>
                                <th scope="col">Description</th>
                                <th scope="col">Fee (‚Ç±)</th>
                                <th scope="col">Fields</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Table rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Document Modal -->
    <div class="modal fade" id="addDocumentModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">Add New Document Type</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addDocumentForm">
                        <div class="mb-3">
                            <label for="documentName" class="form-label">Document Name</label>
                            <input type="text" class="form-control" id="documentName" required>
                        </div>
                        <div class="mb-3">
                            <label for="documentDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="documentDescription" rows="3"></textarea>
                        </div>

                                        <div class="mb-3">
                                            <label for="documentFee" class="form-label">Processing Fee (‚Ç±)</label>
                                            <input type="number" class="form-control" id="documentFee" min="0" step="1"
                                                required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Required Fields</label>
                                            <div class="d-flex align-items-center mb-2">
                                                <div class="form-check me-3">
                                                    <input class="form-check-input" type="checkbox" id="editFullNameField" checked disabled />
                                                    <label class="form-check-label" for="editFullNameField">Requester's Full Name</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="editRequestedFor" checked disabled>
                                                    <label class="form-check-label" for="editRequestedFor">Requested for</label>
                                                </div>
                                            </div>
                                            <div id="editAdditionalFields">
                                                </div>
                                            <button type="button" class="btn btn-outline-primary btn-sm mt-2" id="editAddFieldBtn">
                                                <i class="bi bi-plus"></i> Add Custom Field
                                            </button>
                                        </div>
                                        <div class="mb-3">
                                            <div class="alert alert-info py-2" role="alert">
                                                <strong>Tip:</strong> Use placeholders in your document template to dynamically insert data from the document request.<br><br>
                                                <strong>Here's how to map the custom fields to placeholders:</strong><br>
                                                <ul>
                                                    <li>For any <strong>"Custom Field"</strong> you add, use its field key as the placeholder. The field key is generated from the field name by converting it to lowercase and replacing spaces and special characters with underscores (e.g., a field named "Child's Name" would have the placeholder `child_s_name`).</li>
                                                    <li>For the <strong>current date</strong>, use the placeholder: `${current_date}` to automatically insert today's date.</li>
                                                </ul>
                                            </div>
                                            <label class="form-label">Upload Template (.doc/.docx)</label>
                                            <input type="file" class="form-control" id="addTemplateFile" accept=".docx">
                                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" id="saveDocumentBtn">Save Document
                        Type</button>
                </div>
            </div>
        </div>
    </div>

                    <!-- Edit Document Modal -->
                    <div class="modal fade" id="editDocumentModal" tabindex="-1" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header bg-primary text-white">
                                    <h5 class="modal-title">Edit Document Type</h5>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="editDocumentForm">
                                        <input type="hidden" id="editDocumentId">
                                        <div class="mb-3">
                                            <label for="editDocumentName" class="form-label">Document Name</label>
                                            <input type="text" class="form-control" id="editDocumentName" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="editDocumentDescription" class="form-label">Description</label>
                                            <textarea class="form-control" id="editDocumentDescription"
                                                rows="3"></textarea>
                                        </div>
                                        <div class="mb-3">
                                            <label for="editDocumentFee" class="form-label">Processing Fee (‚Ç±)</label>
                                            <input type="number" class="form-control" id="editDocumentFee" min="0"
                                                step="1" required>
                                        </div>
                                        <div class="mb-3">
                                            <div class="mb-3">
                                            <label class="form-label">Required Fields</label>
                                            <div class="d-flex align-items-center mb-2">
                                                <div class="form-check me-3">
                                                    <input class="form-check-input" type="checkbox" id="fullNameField" checked disabled>
                                                    <label class="form-check-label" for="fullNameField">Recipient's Full Name</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="RequestedFor" checked disabled>
                                                    <label class="form-check-label" for="RequestedFor">Requested for</label>
                                                </div>
                                            </div>
                                            <div id="additionalFields">
                                                </div>
                                            <button type="button" class="btn btn-outline-primary btn-sm mt-2" id="addFieldBtn">
                                                <i class="bi bi-plus"></i> Add Custom Field
                                            </button>
                                        </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Upload New Template (.doc/.docx)</label>
                                            <p class="small text-muted mb-1">Current file: <span id="editFileHint">‚Äì</span></p>
                                            <input type="file" class="form-control" id="editTemplateFile" accept=".doc,.docx">
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Cancel</button>
                                    <button type="button" class="btn btn-primary" id="updateDocumentBtn">Update Document
                                        Type</button>
                                </div>
                            </div>
                        </div>
                    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">Confirm Deletion</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete the document type "<span id="deleteDocumentName"></span>"?
                    </p>
                    <p class="text-danger"><strong>Warning:</strong> This action cannot be undone.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>



    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <script src="../../js/sidebar-script.js"></script>
    <script src="../../js/logout-script.js"></script>
    <script src="../../js/document-template-script.js"></script>
    <script src="../../js/admin-signout.js"></script>
</body>

</html>